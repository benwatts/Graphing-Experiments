Raphael.fn.drawGrid=function(a,b,c,d,e,f,g){};$(function(){$("#data").css({position:"absolute",left:"-9999em",top:"-9999em"})});window.onload=function(){function a(a,b,c,d,e,f){var g=(c-a)/2,h=(e-c)/2,i=Math.atan((c-a)/Math.abs(d-b)),j=Math.atan((e-c)/Math.abs(d-f));i=b<d?Math.PI-i:i;j=f<d?Math.PI-j:j;var k=Math.PI/2-(i+j)%(Math.PI*2)/2,l=g*Math.sin(k+i),m=g*Math.cos(k+i),n=h*Math.sin(k+j),o=h*Math.cos(k+j);return{x1:c,y1:d,x2:c,y2:d}}var b=[],c=[];$("#data tfoot th").each(function(){b.push($(this).html())});$("#data tbody td").each(function(){c.push($(this).html())});var d=800,e=250,f=30,g=20,h=20,i=.6,j="hsl("+[i,.5,.5]+")",k=Raphael("holder",d,e),l={font:"12px Helvetica, Arial",fill:"#fff"},m={font:"10px Helvetica, Arial",fill:"#fff"},n={font:"12px Helvetica, Arial",fill:"#000"},o=(d-f)/b.length,p=Math.max.apply(Math,c),q=(e-g-h)/p,r=k.path().attr({stroke:j,"stroke-width":4,"stroke-linejoin":"round"}),s=k.path().attr({stroke:"none",opacity:.3,fill:j}),t=k.set(),u=0,v=0,w=!1,x,y=k.set();t.push(k.text(60,12,"24 hits").attr(l));t.push(k.text(60,27,"22 September 2008").attr(m).attr({fill:j}));t.hide();var z=k.popup(100,100,t,"right").attr({fill:"#000",stroke:"#666","stroke-width":2,"fill-opacity":.7}).hide(),A,B;for(var C=0,D=b.length;C<D;C++){var E=Math.round(e-g-q*c[C]),F=Math.round(f+o*(C+.5)),G=k.text(F,e-6,b[C]).attr(l).toBack();if(!C){A=["M",F,E,"C",F,E];B=["M",f+o*.5,e-g,"L",F,E,"C",F,E]}if(C&&C<D-1){var H=Math.round(e-g-q*c[C-1]),I=Math.round(f+o*(C-.5)),J=Math.round(e-g-q*c[C+1]),K=Math.round(f+o*(C+1.5)),L=a(I,H,F,E,K,J);A=A.concat([L.x1,L.y1,F,E,L.x2,L.y2]);B=B.concat([L.x1,L.y1,F,E,L.x2,L.y2])}var M=null;y.push(k.rect(f+o*C,0,o,e-g).attr({stroke:"none",fill:"#fff",opacity:0}));var N=y[y.length-1]}A=A.concat([F,E,F,E]);B=B.concat([F,E,F,E,"L",F,e-g,"z"]);r.attr({path:A});s.attr({path:B});z.toFront();t[0].toFront();t[1].toFront();y.toFront()};